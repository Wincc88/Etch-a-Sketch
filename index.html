<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="stylesheet.css">


</head>
<body>

    <div>
        <button id="newgrid">Click to insert number of squares</button>
    </div>

    <div id="wholeContainer">
    </div>
    

    <script>
      
        const wholeContainer = document.querySelector("#wholeContainer");
        let n = 16;                               /* manipulate as prompt changing value later. */
        
        for (let i = 0; i < n; i++) {
            const ColContent = document.createElement("div");
            ColContent.classList.add("ColContent");
           
            
            for (let j = 0; j < n; j++) {
                const RowContent = document.createElement("div");
                RowContent.classList.add("RowContent");
                ColContent.appendChild(RowContent);
                RowContent.setAttribute("style", "background: white;");    

            }
             wholeContainer.appendChild(ColContent);
        } 

        
        const RowContent = document.querySelectorAll(".RowContent");    /*like RockScisPap, QueryselectorAll helped select each div of the many divs*/
                                                                 /*forEach loops through all content div displaying events */
        RowContent.forEach((RowContent) => {
            
        RowContent.addEventListener("mouseover", () => {
            RowContent.setAttribute("style", "background: black;");
        });

        RowContent.addEventListener("mouseout", () => {
            RowContent.setAttribute("style", "background: blue;");
        });

        });
          
        
        const newgrid = document.querySelector("#newgrid");
        newgrid.addEventListener("click", () => {

            wholeContainer.replaceChildren();   // removes the previous COlContent which is the container children

                while (true) {
                    NewsquarePerSide = prompt("Enter new grid number");
                
                        if (NewsquarePerSide <= 0 || NewsquarePerSide > 100 || isNaN(NewsquarePerSide)) {
                            alert("Invalid Entry: Enter a number between 1 and 100.");
                            NewsquarePerSide;
                            continue;
                        }
                        else {
                            break;
                        }
                }
                
                for (let i = 0; i < NewsquarePerSide; i++) {
                    
                    const InputSquarecol = document.createElement("div");
                    InputSquarecol.classList.add("InputSquarecol");
                    
                
                    for (let j = 0; j < NewsquarePerSide; j++) {
                        const InputSquarerow = document.createElement("div");
                        InputSquarerow.classList.add("InputSquarerow");
                        InputSquarecol.appendChild(InputSquarerow);
                        InputSquarerow.setAttribute("style", "background: green;");    
                    }

                    wholeContainer.appendChild(InputSquarecol);
                } 

                const InputSquarerow = document.querySelectorAll(".InputSquarerow"); 
                                                                 
                    InputSquarerow.forEach((InputSquarerow) => {
                                                                   
                        InputSquarerow.addEventListener("mousemove", changeDivBackground);

                        function random(number) {
                            return Math.floor(Math.random() * (number + 1));
                            }
                         
                        function changeDivBackground()  { 
                            const rndCol = `rgb(${random(255)} ${random(255)} ${random(255)})`;
                             
                        InputSquarerow.style.backgroundColor = rndCol;
                        //InputSquarerow.style.backgroundColor = "blue";
                        InputSquarerow.style.opacity = 0.1;
                        InputSquarerow.removeEventListener("mousemove", changeDivBackground);
                        }
                         
                        
                        let opacity = [0.2, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0];
                        
                        let counter = 0;  //counter helper for multiple clicks

                                           
                        InputSquarerow.addEventListener("click", darkenOpacity);
                                      
                        function darkenOpacity() {
                            if (counter < opacity.length) {
                                InputSquarerow.style.opacity = opacity[counter];
                                counter++;
                                console.log(counter);
                                console.log(InputSquarerow.style.opacity);
                            }
                        }                  
                    
                    });          
        });

        



    </script>
</body>
</html>